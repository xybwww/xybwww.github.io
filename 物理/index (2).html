<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matter.js 鼠标添加球体示例</title>
    <style>
        body, html { margin: 0; padding: 0; overflow: hidden; width: 100%; height: 100%; }
        canvas { display: block; background: #eee; }
    </style>
</head>
<body>
    <canvas id="demo-canvas"></canvas>

    <script src="../js/matter.js"></script>
    <script>
        // 获取canvas元素
        const canvas = document.getElementById('demo-canvas');
        const engine = Matter.Engine.create();
        const render = Matter.Render.create({
            element: canvas,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false
            }
        });

        // 初始化canvas大小
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // 监听窗口大小变化
        window.addEventListener('resize', () => {
            render.options.width = window.innerWidth;
            render.options.height = window.innerHeight;
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            Matter.Render.lookAt(render, { minX: 0, minY: 0, maxX: window.innerWidth, maxY: window.innerHeight });
        });

        // 监听鼠标点击事件
        canvas.addEventListener('mousedown', function(event) {
            // 将鼠标位置转换为画布内的坐标
            const rect = canvas.getBoundingClientRect();
            const mouseX = event.clientX - rect.left;
            const mouseY = event.clientY - rect.top;

            // 创建一个球体
            const ball = Bodies.circle(mouseX, mouseY, 20, {
                restitution: 0.95, // 弹性
                friction: 0.1,    // 摩擦力
                frictionAir: 0.04 // 空气阻力
            });

            // 将球体添加到世界中
            World.add(engine.world, ball);
        });

        // 渲染循环
        Matter.Engine.run(engine);
        Matter.Render.run(render);
    </script>
</body>
</html>